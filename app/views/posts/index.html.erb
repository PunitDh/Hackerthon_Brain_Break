

<div class="jumbotron"><h1>> git choc log 🍫</h1>
<p class="lead">GitChoc Master List</p></div>

<table class="table">
<thead>
<th>Name</th>
<th>Chocolates</th>
<th colspan=3></th>
</thead>
<tbody>
<% @posts.each do |post| %>
<tr><td>
  <%= post.title %></td><td>
  <%= form_with(model: post, url: edit_path(post.id), method: "patch") do |form| %>
  <%= form.number_field(:body, in: 1..100, step: 1, class: "form-control", id: ("post_body_" + post.id.to_s)) %>
  
  </td>

<td>
  <button type="button" id="chocolateaddbutton_<%= post.id %>" class="btn btn-success">+1 Choc 😃</button>
  <button type="button" id="chocolateremovebutton_<%= post.id %>" class="btn btn-danger">-1 Choc 😭</button>
  </td>

<td><%= button_tag('Update Chocolateer 🍫', type: "submit", class: 'btn btn-warning') %></td>
        <% end %>

  <td><%= link_to 'View Chocolateer 🍫', show_path(post), class: 'btn btn-info' %></td>
        
        <td><%= link_to 'Delete Chocolateer 🍫', delete_path(post), method: :delete, data: { confirm: 'Are you sure you want to delete this Chocolateer? There is NO TURNING BACK!' }, class: 'btn btn-danger' %></td>
        </tr>
<% end %>
</tbody>
</table>

<div class="col"><%= link_to 'New', new_path, class: 'btn btn-info' %></div>


<script>

<% @posts.each do |post| %>
  document.getElementById("chocolateaddbutton_<%= post.id %>").addEventListener("click",(event) => {
    document.getElementById("post_body_<%= post.id %>").value++;
    event.preventDefault();
    });

  document.getElementById("chocolateremovebutton_<%= post.id %>").addEventListener("click",(event) => {
    document.getElementById("post_body_<%= post.id %>").value--;
    event.preventDefault();
    });

<% end %>
</script>
